<?xml version="1.0" standalone="no"?>

<kickstart>

  <description>
  NSCA Nagios plug-in for Nagios client
  </description>

  <copyright>
  Copyright (c) 2000 - 2008 The Regents of the University of California.
  All rights reserved. Rocks(r) v5.1 www.rocksclusters.org
  </copyright>

  <changelog>
  $Log$
  Revision 1.6  2009/04/24 23:49:33  anoop
  Enable sunos build for nsca. Added libmcrypt back to enable optional
  encryption. Removed send-nsca, so that we build from the same codebase

  Revision 1.5  2009/04/23 20:39:03  jhayes
  Work around nsca weirdness.

  Revision 1.4  2009/04/23 20:10:31  jhayes
  Portability tweaks.  Remove libmcrypt, since we're not using it.

  Revision 1.3  2009/04/23 17:48:10  jhayes
  Build send_nsca on target for portability.

  Revision 1.2  2009/04/21 20:50:52  jhayes
  Add NSCA configuration files.

  Revision 1.1  2009/04/21 17:59:01  jhayes
  Initial additions for NSCA plug-in.

  </changelog>

  <package os="linux">nsca</package>
  <package os="sunos">ROCKSnsca</package>
  <package os="sunos">ROCKSlibmcrypt</package>

  <post>

/usr/sbin/groupadd -g 413 nagios
/usr/sbin/useradd  -u 413 -g nagios -c "Nagios Monitoring" -d /opt/nagios nagios

<!-- adapted from nsca-2.7.2/sample_config/send_nsca.cfg -->
mkdir -p /opt/nagios/etc
chown -R nagios:nagios /opt/nagios/etc
<file name="/opt/nagios/etc/send_nsca.cfg" owner="nagios:nagios" perms="0644">
##
## ROCKS
##
# We're restricting to local network; password would be overkill
#password=
encryption_method=1
</file> <!-- NOTE: send_nsca pukes if we indent this closing tag! -->

</post>

</kickstart>
